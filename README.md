# Курсова Робота: Розробка автоматизованої системи оновлення доріг

**Виконавець:** Васюк Віталій (Група ФЕІ-32)

---

## Огляд проєкту

Цей проєкт реалізує автоматизовану систему для інтерактивного редагування, верифікації та оновлення географічних лінійних об'єктів (доріг) у заданій області.

**Система складається з трьох ключових компонентів:**
1. **Frontend:** Інтерактивний картографічний редактор.
2. **Backend (FastAPI):** REST API для обробки даних.
3. **Celery Workers:** Асинхронна черга для виконання фонових завдань.

---

## Ключові технології

| Частина | Стек |
|---|---|
| **Frontend** | React, MapLibre GL, Mapbox Draw, Axios |
| **Backend** | Python, FastAPI, Celery (для асинхронності) |

---

## Основний функціонал Frontend

* **Картографічний Редактор:** Відображення доріг, шару OpenStreetMap та супутникових знімків OAM.
* **Редагування:** Малювання, переміщення та видалення вершин/ліній.

---

## Запуск та налаштування

Проєкт було перероблено так, щоб можна було запускати його через Docker. Проте для запуску проєкту треба визначити певні секретні змінні. Нижче наведено опис їх призначення.

### 1. Змінні для API

| Змінна | Опис |
|---|---|
| `DATABASE_URL` | Рядок підключення до головної бази даних PostgreSQL (містить логін, пароль, хост, порт та назву БД). |
| `BROKERHOST` | Мережева адреса сервера Redis. |
| `BROKERPORT` | Порт для підключення до Redis. |
| `BROKERDBWRITE` | Індекс бази Redis, куди записуються нові задачі для ML-моделі (черга на виконання). |
| `BROKERDBREAD` | Індекс бази Redis, куди ML-воркер записує готові результати обробки. |
| `BROKERDBWRITEPOSTPROCESS` | Індекс бази Redis, куди записуються задачі для векторизації. |
| `BROKERDBREADPOSTPROCESS` | Індекс бази Redis, де зберігаються результати роботи воркера векторизації. |
| `MAPAPI` | URL-адреса зовнішнього сервісу, який використовується для пошуку та завантаження супутникових знімків. |
| `BUCKET_NAME` | Назва контейнера в S3-сховищі, де зберігаються файли масок та інші бінарні дані проєкту. |
| `AWS_ACCESS_KEY_ID` | Публічний ключ доступу (аналог логіна). |
| `AWS_SECRET_KEY_ID` | Приватний ключ для авторизації (аналог пароля). |
| `AWS_ENDPOINT_URL` | Адреса сервера сховища (вказується для S3-сумісних сервісів, таких як MinIO або Storj, щоб запити не йшли на Amazon). |

### 2. Змінні для Воркера Моделі (ML)

> **Примітка:** Змінні підключення до Redis та S3 (`BROKER...`, `AWS...`, `BUCKET_NAME`) мають ті самі значення, що і в секції API.

| Змінна | Опис |
|---|---|
| `PATHTOMODEL` | Шлях до файлу моделі. |
| `BROKERHOST` | Мережева адреса сервера Redis. |
| `BROKERPORT` | Порт для підключення до Redis. |
| `BROKERDBWRITE` | Індекс бази Redis для запису задач. |
| `BROKERDBREAD` | Індекс бази Redis для читання результатів. |
| `BUCKET_NAME` | Назва S3 контейнера. |
| `AWS_ACCESS_KEY_ID` | S3 Public Key. |
| `AWS_SECRET_KEY_ID` | S3 Private Key. |
| `AWS_ENDPOINT_URL` | S3 Endpoint. |

### 3. Змінні для Воркера Післяобробки

> **Примітка:** Змінні підключення до Redis та S3 мають ті самі значення, що і в попередніх секціях.

| Змінна | Опис |
|---|---|
| `BROKERHOST` | Мережева адреса сервера Redis. |
| `BROKERPORT` | Порт для підключення до Redis. |
| `BROKERDBWRITEPOSTPROCESS` | Індекс бази Redis для запису задач векторизації. |
| `BROKERDBREADPOSTPROCESS` | Індекс бази Redis для читання результатів векторизації. |
| `BUCKET_NAME` | Назва S3 контейнера. |
| `AWS_ACCESS_KEY_ID` | S3 Public Key. |
| `AWS_SECRET_KEY_ID` | S3 Private Key. |
| `AWS_ENDPOINT_URL` | S3 Endpoint. |

### 4. Змінні для Клієнтської Частини (Frontend)

| Змінна | Опис |
|---|---|
| `VITE_API_URL` | Посилання на серверну частину (API URL). |